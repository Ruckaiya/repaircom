(function(u){function O(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(n,s,i,r){return s+s+i+i+r+r});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function C(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function w(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function I(){return w()+w()+"-"+w()+"-"+w()+"-"+w()+"-"+w()+w()+w()}function S(t){var e=t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{1,2}:[0-9]{2}:[0-9]{2}$/);if(e!==null&&e.length>0){var a=t.split(" "),n=a[0].split("-"),s=a[1].split(":");return new Date(n[0],n[1]-1,n[2],s[0],s[1],s[2])}var i=Date.parse(t);return isNaN(i)?(i=Date.parse(t.replace(/-/g,"/").replace("T"," ")),isNaN(i)?new Date:i):i}function k(t,e,a,n,s){for(var i={},r={},o={},h={},p={},d={},v=null,b=0;b<n.length;b++){var x,l=n[b];x=v===null?a/g[l]:g[v]/g[l];var y=t/g[l],f=e/g[l];s&&(y=y>0?Math.floor(y):Math.ceil(y),f=f>0?Math.floor(f):Math.ceil(f)),l!=="Days"&&(y%=x,f%=x),i[l]=y,o[l]=Math.abs(y),r[l]=f,d[l]=Math.abs(f),h[l]=Math.abs(y)/x,p[l]=Math.abs(f)/x,v=l}return{raw_time:i,raw_old_time:r,time:o,old_time:d,pct:h,old_pct:p}}function L(){typeof m.TC_Instance_List!="undefined"?M=m.TC_Instance_List:m.TC_Instance_List=M,j(m)}function j(t){for(var e=["webkit","moz"],a=0;a<e.length&&!t.requestAnimationFrame;++a)t.requestAnimationFrame=t[e[a]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[a]+"CancelAnimationFrame"];t.requestAnimationFrame&&t.cancelAnimationFrame||(t.requestAnimationFrame=function(n,s,i){typeof i=="undefined"&&(i={data:{last_frame:0}});var r=new Date().getTime(),o=Math.max(0,16-(r-i.data.last_frame)),h=t.setTimeout(function(){n(r+o)},o);return i.data.last_frame=r+o,h},t.cancelAnimationFrame=function(n){clearTimeout(n)})}var m=window;Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=a.length;return function(s){if(typeof s!="object"&&(typeof s!="function"||s===null))throw new TypeError("Object.keys called on non-object");var i,r,o=[];for(i in s)t.call(s,i)&&o.push(i);if(e)for(r=0;n>r;r++)t.call(s,a[r])&&o.push(a[r]);return o}}());var D=!1,A=200,F=(location.hash,["Days","Hours","Minutes","Seconds"]),H={Seconds:"Minutes",Minutes:"Hours",Hours:"Days",Days:"Years"},g={Seconds:1,Minutes:60,Hours:3600,Days:86400,Months:2678400,Years:31536e3};Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=e);e>a;a++)if(a in this&&this[a]===t)return a;return-1});var M={},c=function(t,e){this.element=t,this.container,this.listeners=null,this.data={paused:!1,last_frame:0,animation_frame:null,interval_fallback:null,timer:!1,total_duration:null,prev_time:null,drawn_units:[],text_elements:{Days:null,Hours:null,Minutes:null,Seconds:null},attributes:{canvas:null,context:null,item_size:null,line_width:null,radius:null,outer_radius:null},state:{fading:{Days:!1,Hours:!1,Minutes:!1,Seconds:!1}}},this.config=null,this.setOptions(e),this.initialize()};c.prototype.clearListeners=function(){this.listeners={all:[],visible:[]}},c.prototype.addTime=function(t){if(this.data.attributes.ref_date instanceof Date){var e=this.data.attributes.ref_date;e.setSeconds(e.getSeconds()+t)}else isNaN(this.data.attributes.ref_date)||(this.data.attributes.ref_date+=1e3*t)},c.prototype.initialize=function(t){this.data.drawn_units=[];for(var r=0;r<Object.keys(this.config.time).length;r++){var e=Object.keys(this.config.time)[r];this.config.time[e].show&&this.data.drawn_units.push(e)}u(this.element).children("div.time_circles").remove(),typeof t=="undefined"&&(t=!0),(t||this.listeners===null)&&this.clearListeners(),this.container=u("<div>"),this.container.addClass("time_circles"),this.container.appendTo(this.element);var a=this.element.offsetHeight,n=this.element.offsetWidth;a===0&&(a=u(this.element).height()),n===0&&(n=u(this.element).width()),a===0&&n>0?a=n/this.data.drawn_units.length:n===0&&a>0&&(n=a*this.data.drawn_units.length);var s=document.createElement("canvas");s.width=n,s.height=a,this.data.attributes.canvas=u(s),this.data.attributes.canvas.appendTo(this.container);var i=C();i||typeof G_vmlCanvasManager=="undefined"||(G_vmlCanvasManager.initElement(s),D=!0,i=!0),i&&(this.data.attributes.context=s.getContext("2d")),this.data.attributes.item_size=Math.min(n/this.data.drawn_units.length,a),this.data.attributes.line_width=this.data.attributes.item_size*this.config.fg_width,this.data.attributes.radius=(.8*this.data.attributes.item_size-this.data.attributes.line_width)/2,this.data.attributes.outer_radius=this.data.attributes.radius+.5*Math.max(this.data.attributes.line_width,this.data.attributes.line_width*this.config.bg_width);var r=0;for(var o in this.data.text_elements)if(this.config.time[o].show){var h=u("<div>");h.addClass("textDiv_"+o),h.css("top",Math.round(.35*this.data.attributes.item_size)),h.css("left",Math.round(r++*this.data.attributes.item_size)),h.css("width",this.data.attributes.item_size),h.appendTo(this.container);var p=u("<span class='number'>");p.appendTo(h);var d=u("<span class='text'>");d.text(this.config.time[o].text),d.appendTo(h),this.data.text_elements[o]=p}this.start(),this.config.start||(this.data.paused=!0);var v=this;this.data.interval_fallback=m.setInterval(function(){v.update.call(v,!0)},100)},c.prototype.update=function(t){if(typeof t=="undefined")t=!1;else if(t&&this.data.paused)return;D&&this.data.attributes.context.clearRect(0,0,this.data.attributes.canvas[0].width,this.data.attributes.canvas[0].hright);var e,a,n=this.data.prev_time,s=new Date;if(this.data.prev_time=s,n===null&&(n=s),!this.config.count_past_zero&&s>this.data.attributes.ref_date){for(var b=0;b<this.data.drawn_units.length;b++){var i=this.data.drawn_units[b];this.data.text_elements[i].text("0");var r=b*this.data.attributes.item_size+this.data.attributes.item_size/2,o=this.data.attributes.item_size/2,h=this.config.time[i].color;this.drawArc(r,o,h,0)}return void this.stop()}e=(this.data.attributes.ref_date-s)/1e3,a=(this.data.attributes.ref_date-n)/1e3;var p=this.config.animation!=="smooth",d=k(e,a,this.data.total_duration,this.data.drawn_units,p),v=k(e,a,g.Years,F,p),b=0,x=0,l=null,y=this.data.drawn_units.slice();for(var b in F){var i=F[b];if(Math.floor(v.raw_time[i])!==Math.floor(v.raw_old_time[i])&&this.notifyListeners(i,Math.floor(v.time[i]),Math.floor(e),"all"),!(y.indexOf(i)<0)){if(Math.floor(d.raw_time[i])!==Math.floor(d.raw_old_time[i])&&this.notifyListeners(i,Math.floor(d.time[i]),Math.floor(e),"visible"),!t){this.data.text_elements[i].text(Math.floor(Math.abs(d.time[i])));var r=x*this.data.attributes.item_size+this.data.attributes.item_size/2,o=this.data.attributes.item_size/2,h=this.config.time[i].color;this.config.animation==="smooth"?(l===null||D||(Math.floor(d.time[l])>Math.floor(d.old_time[l])?(this.radialFade(r,o,h,1,i),this.data.state.fading[i]=!0):Math.floor(d.time[l])<Math.floor(d.old_time[l])&&(this.radialFade(r,o,h,0,i),this.data.state.fading[i]=!0)),this.data.state.fading[i]||this.drawArc(r,o,h,d.pct[i])):this.animateArc(r,o,h,d.pct[i],d.old_pct[i],new Date().getTime()+A)}l=i,x++}}if(!this.data.paused&&!t){var f=this,z=function(){f.update.call(f)};if(this.config.animation==="smooth")this.data.animation_frame=m.requestAnimationFrame(z,f.element,f);else{var T=e%1*1e3;0>T&&(T=1e3+T),T+=50,f.data.animation_frame=m.setTimeout(function(){f.data.animation_frame=m.requestAnimationFrame(z,f.element,f)},T)}}},c.prototype.animateArc=function(t,e,a,n,s,i){if(this.data.attributes.context!==null){var r=s-n;if(Math.abs(r)>.5)n===0?this.radialFade(t,e,a,1):this.radialFade(t,e,a,0);else{var o=(A-(i-new Date().getTime()))/A;o>1&&(o=1);var h=s*(1-o)+n*o;if(this.drawArc(t,e,a,h),o>=1)return;var p=this;m.requestAnimationFrame(function(){p.animateArc(t,e,a,n,s,i)},this.element)}}},c.prototype.drawArc=function(t,e,a,n){if(this.data.attributes.context!==null){var s=Math.max(this.data.attributes.outer_radius,this.data.attributes.item_size/2);D||this.data.attributes.context.clearRect(t-s,e-s,2*s,2*s),this.config.use_background&&(this.data.attributes.context.beginPath(),this.data.attributes.context.arc(t,e,this.data.attributes.radius,0,2*Math.PI,!1),this.data.attributes.context.lineWidth=this.data.attributes.line_width*this.config.bg_width,this.data.attributes.context.strokeStyle=this.config.circle_bg_color,this.data.attributes.context.stroke());var i,r,o,h=-.5*Math.PI,p=2*Math.PI;i=h+this.config.start_angle/360*p;var d=2*n*Math.PI;this.config.direction==="Both"?(o=!1,i-=d/2,r=i+d):this.config.direction==="Clockwise"?(o=!1,r=i+d):(o=!0,r=i-d),this.data.attributes.context.beginPath(),this.data.attributes.context.arc(t,e,this.data.attributes.radius,i,r,o),this.data.attributes.context.lineWidth=this.data.attributes.line_width,this.data.attributes.context.strokeStyle=a,this.data.attributes.context.stroke()}},c.prototype.radialFade=function(t,e,a,n,s){var i,r=O(a),o=this,h=.2*(n===1?-1:1);for(i=0;1>=n&&n>=0;i++)(function(){var p=50*i,d="rgba("+r.r+", "+r.g+", "+r.b+", "+Math.round(10*n)/10+")";m.setTimeout(function(){o.drawArc(t,e,d,1)},p)})(),n+=h;typeof s!==void 0&&m.setTimeout(function(){o.data.state.fading[s]=!1},50*i)},c.prototype.timeLeft=function(){if(this.data.paused&&typeof this.data.timer=="number")return this.data.timer;var t=new Date;return(this.data.attributes.ref_date-t)/1e3},c.prototype.start=function(){m.cancelAnimationFrame(this.data.animation_frame),m.clearTimeout(this.data.animation_frame);var t=u(this.element).data("date");if(typeof t=="undefined"&&(t=u(this.element).attr("data-date")),typeof t=="string")this.data.attributes.ref_date=S(t);else if(typeof this.data.timer=="number")this.data.paused&&(this.data.attributes.ref_date=new Date().getTime()+1e3*this.data.timer);else{var e=u(this.element).data("timer");typeof e=="undefined"&&(e=u(this.element).attr("data-timer")),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?(this.data.timer=e,this.data.attributes.ref_date=new Date().getTime()+1e3*e):this.data.attributes.ref_date=this.config.ref_date}this.data.paused=!1,this.update.call(this)},c.prototype.restart=function(){this.data.timer=!1,this.start()},c.prototype.stop=function(){typeof this.data.timer=="number"&&(this.data.timer=this.timeLeft(this)),this.data.paused=!0,m.cancelAnimationFrame(this.data.animation_frame)},c.prototype.destroy=function(){this.clearListeners(),this.stop(),m.clearInterval(this.data.interval_fallback),this.data.interval_fallback=null,this.container.remove(),u(this.element).removeAttr("data-tc-id"),u(this.element).removeData("tc-id")},c.prototype.setOptions=function(t){if(this.config===null&&(this.default_options.ref_date=new Date,this.config=u.extend(!0,{},this.default_options)),u.extend(!0,this.config,t),m=this.config.use_top_frame?window.top:window,L(),this.data.total_duration=this.config.total_duration,typeof this.data.total_duration=="string")if(typeof g[this.data.total_duration]!="undefined")this.data.total_duration=g[this.data.total_duration];else if(this.data.total_duration==="Auto")for(var e=0;e<Object.keys(this.config.time).length;e++){var a=Object.keys(this.config.time)[e];if(this.config.time[a].show){this.data.total_duration=g[H[a]];break}}else this.data.total_duration=g.Years,console.error("Valid values for TimeCircles config.total_duration are either numeric, or (string) Years, Months, Days, Hours, Minutes, Auto")},c.prototype.addListener=function(t,e,a){typeof t=="function"&&(typeof a=="undefined"&&(a="visible"),this.listeners[a].push({func:t,scope:e}))},c.prototype.notifyListeners=function(t,e,a,n){for(var s=0;s<this.listeners[n].length;s++){var i=this.listeners[n][s];i.func.apply(i.scope,[t,e,a])}},c.prototype.default_options={ref_date:new Date,start:!0,animation:"smooth",count_past_zero:!0,circle_bg_color:"#fff",use_background:!0,fg_width:.1,bg_width:1.2,text_size:.07,total_duration:"Auto",direction:"Clockwise",use_top_frame:!1,start_angle:0,time:{Days:{show:!0,text:"Days",color:"#FC6"},Hours:{show:!0,text:"Hours",color:"#9CF"},Minutes:{show:!0,text:"Minutes",color:"#BFB"},Seconds:{show:!0,text:"Seconds",color:"#F99"}}};var _=function(t,e){this.elements=t,this.options=e,this.foreach()};_.prototype.getInstance=function(t){var e,a=u(t).data("tc-id");if(typeof a=="undefined"&&(a=I(),u(t).attr("data-tc-id",a)),typeof M[a]=="undefined"){var n=this.options,s=u(t).data("options");typeof s=="string"&&(s=JSON.parse(s)),typeof s=="object"&&(n=u.extend(!0,{},this.options,s)),e=new c(t,n),M[a]=e}else e=M[a],typeof this.options!="undefined"&&e.setOptions(this.options);return e},_.prototype.addTime=function(t){this.foreach(function(e){e.addTime(t)})},_.prototype.foreach=function(t){var e=this;return this.elements.each(function(){var a=e.getInstance(this);typeof t=="function"&&t(a)}),this},_.prototype.start=function(){return this.foreach(function(t){t.start()}),this},_.prototype.stop=function(){return this.foreach(function(t){t.stop()}),this},_.prototype.restart=function(){return this.foreach(function(t){t.restart()}),this},_.prototype.rebuild=function(){return this.foreach(function(t){t.initialize(!1)}),this},_.prototype.getTime=function(){return this.getInstance(this.elements[0]).timeLeft()},_.prototype.addListener=function(t,e){typeof e=="undefined"&&(e="visible");var a=this;return this.foreach(function(n){n.addListener(t,a.elements,e)}),this},_.prototype.destroy=function(){return this.foreach(function(t){t.destroy()}),this},_.prototype.end=function(){return this.elements},u.fn.TimeCircles=function(t){return new _(this,t)}})(jQuery);
//# sourceMappingURL=/s/files/1/1180/1832/t/164/assets/jquery.countdown.js.map?v=2358342553073826403
